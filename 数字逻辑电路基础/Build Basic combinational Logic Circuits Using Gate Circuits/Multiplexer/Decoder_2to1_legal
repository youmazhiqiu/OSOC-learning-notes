As for the legal part, I use a extra output x
I use X to make sure inputs are legal
I use NOT GATE input to differ inputs
